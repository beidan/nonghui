<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,  user-scalable=no">
    <style>
        body {
            margin: 0;
        }
    </style>
</head>
<body>
<div id="container" class="scroller">
    <div class="loading">
        下拉刷新数据
    </div>
    <ul>
        <li><a href="#">列表数据1</a></li>
        <li><a href="#">列表数据2</a></li>
        <li><a href="#">列表数据3</a></li>
        <li><a href="#">列表数据4</a></li>
        <li><a href="#">列表数据5</a></li>
        <li><a href="#">列表数据6</a></li>
        <li><a href="#">列表数据7</a></li>
        <li><a href="#">列表数据8</a></li>
        <li><a href="#">列表数据9</a></li>
        <li><a href="#">列表数据10</a></li>
        <li><a href="#">列表数据11</a></li>
        <li><a href="#">列表数据12</a></li>
        <li><a href="#">列表数据13</a></li>
        <li><a href="#">列表数据14</a></li>
        <li><a href="#">列表数据15</a></li>
        <li><a href="#">列表数据16</a></li>
        <li><a href="#">列表数据17</a></li>
        <li><a href="#">列表数据18</a></li>
        <li><a href="#">列表数据19</a></li>
        <li><a href="#">列表数据20</a></li>
        <li><a href="#">列表数据21</a></li>
        <li><a href="#">列表数据22</a></li>
        <li><a href="#">列表数据23</a></li>
        <li><a href="#">列表数据24</a></li>
        <li><a href="#">列表数据25</a></li>
        <li><a href="#">列表数据26</a></li>
        <li><a href="#">列表数据27</a></li>
        <li><a href="#">列表数据28</a></li>
        <li><a href="#">列表数据29</a></li>
        <li><a href="#">列表数据30</a></li>
    </ul>

    <div id="con">
        <div>eee</div>
        <div>aaa</div>
    </div>
</div>

<script>
    var slide = function (option) {
        var defaults = {
            container: '',
            next: function () {
            }
        }
        var start, end, length,
                isLock = false,
                isCanDo = false,
                isTouchPad = (/hp-tablet/gi).test(navigator.appVersion),
                hasTouch = 'ontouchstart' in window && !isTouchPad;
        var obj = document.querySelector(option.container);
        var loading = obj.firstElementChild;
        var offset = loading.clientHeight;
        var objparent = obj.parentElement;
        var fn = {
            translate: function (diff) {
                obj.style.webkitTransform = 'translate3d,' + diff + 'px,0';
                obj.style.transform = 'translate3d(0,' + diff + 'px,0';
            },
            setTransition: function (time) {
                obj.style.webkitTransition = 'all' + time + 's';
                obj.style.transiton = 'all' + time + 's';
            },
            back: function () {
                fn.translate(0 - offset);
                isLock = false;
            },
            addEvent: function (ele, event_name, event_fn) {
                if (ele.addEventListener) {
                    ele.addEventListener(event_name, event_fn, false);
                } else if (ele.attachEvent) {
                    ele.attachEvent('on' + event_name, event_fn);
                } else {
                    ele['on' + event_name] = event_fn;
                }
            }
        };
        fn.translate(0 - offset);
        fn.addEvent(obj, 'touchstart', start);
        fn.addEvent(obj, 'touchmove', move);
        fn.addEvent(obj, 'touchend', end);
        fn.addEvent(obj, 'mousedown', start);
        fn.addEvent(obj, 'mousemove', move);
        fn.addEvent(obj, 'mousedown', end);

        //start move
        function start(e) {
            if (objparent.scrollTop <= 0 && !isLock) {
                var even = typeof event == 'undefined' ? e : event;
                isLock = true;
                isCanDo = true;
                start = hasTouch ? even.touches[0].pageY : even.pageY;
                fn.setTransiton(0);
                loading.innerHTML = '下拉刷新数据';
            }
        }

        function move(e) {
            if (objparent.scrollTop <= 0 && isCanDo) {
                var even = typeof event == 'undefined' ? e : event;  //判断该event
                end = hasTouch ? even.touches[0].pageY : even.pageY;
                if (start < end) {
                    even.preventDefault();
                    fn.setTransition(0);
                    if ((end - start - offset) / 2 <= 150) {
                        length = (end - start - offset) / 2;
                        fn.translate(length);
                    }
                    else {
                        length += 0.3;
                        fn.translate(length);
                    }
                }
            }
        }


    }


</script>

</body>
</html>